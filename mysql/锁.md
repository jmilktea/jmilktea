![image](https://github.com/jmilktea/jmilktea/blob/master/mysql/images/%E9%94%81.png)
- mysql锁是加在索引上，如果不是聚簇索引，会把聚簇索引也加上  
- gap锁是间隙锁用于对一个范围加锁，防止幻读，mysql的间隙锁实际解决了部分幻读问题
- mysql锁和索引有很大关系，具体需要看执行计划，当语句没有走到索引时，加锁的效率会急剧下降


对于表级别的S/X/IS/IX兼容性，如下：  
![image](https://github.com/jmilktea/jmilktea/blob/master/mysql/images/table-lock.png)  
- 这里的S/X强调表级别
- 意向锁之间互相兼容，但它会与S/X冲突，用来判断是否能加S/X锁
