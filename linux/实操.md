### 系统负载 
**命令：top**   
描述：top 可以查看机器负载情况，在排查问题的时候经常会用到  
![image](https://github.com/jmilktea/jmilktea/blob/master/linux/images/top.png)  
输出概要信息包含系统信息，进程信息，cpu信息，物理内存信息，交换区内存信息：  
**top**：09:44:56 [当前系统时间], 16 days[系统已经运行了16天], 1 user[个用户当前登录], load average: 9.59, 4.75, 1.92[系统负载，即任务队列的平均长度]  
**Tasks**: 145 total[总进程数], 2 running[正在运行的进程数], 143 sleeping[睡眠的进程数], 0 stopped[停止的进程数], 0 zombie[冻结进程数]    
**Cpu(s)**: 99.8%us[用户空间占用CPU百分比], 0.1%sy[内核空间占用CPU百分比], 0.0%ni[用户进程空间内改变过优先级的进程占用CPU百分比], 0.2%id[空闲CPU百分比], 0.0%wa[等待输入输出的CPU时间百分比], 0.0%hi[], 0.0%st[]    
**Mem**: 4147888k total[物理内存总量], 2493092k used[使用的物理内存总量], 1654796k free[空闲内存总量], 158188k buffers[用作内核缓存的内存量]  
**Swap**: 5144568k total[交换区总量],56k used[使用的交换区总量],5144512k free[空闲交换区总量],2013180k cached[缓冲的交换区总量]
- 操作
  - 按下P控制台会按照%CPU排序
  - 按下M则会按照内存排序
  - 按下q则退出
  - 使用-p 参数可以查看指定进程  
  如 top -p 8963查看java进程的使用情况


### 磁盘/目录
**命令：df(disk free)，du（disk usage）**

- df 查看磁盘使用情况  
df -h：-h表示以可读形式输出，例如1G,200M代替字节输出如下：  
![image](https://github.com/jmilktea/jmilktea/blob/master/linux/images/df.png)  
**Filesystem**:表示文件系统名称  **Size**:大小  **Used**:已用大小  **Avail**:可用空间  **Use**%:已用百分比  **Mounted on**:挂载点  
从上面可以看到vda1这个盘挂载在/根目录下，并且已用100%，没有剩余空间了

- du 查看目录文件使用情况  
  - **查看某个文件或目录大小：du -h 目录/文件名**  
  没有写文件名则表示当前目录    
  
  - **查看当前目录下所有目录大小：du -sh \***   
  -s表示汇总，而不输出子目录    
  
  - **查看当前所有目录大小并排序：du -sh * | sort -h**   
  sort -h表示依照可读大小排序   
  
  - **查看当前目录下最大的10个目录：du -sh * | sort -rh | head -n 10 或者 du -sh * | sort -h | tail -n 10**    
  sort -r表示倒序，head -n 取前n个  
  
  - **查看占用最大的10个文件：find / -type f -print0 | xargs -0 du -h | sort -rh | head -n 10**   
  上面的输出都是基于目录，如果我们想要查找文件单纯使用du无法使用，需要结合一下find，命令看起来比较复杂，也是面试经常会问到的  
  find / -type f：表示在/目录下查找文件类型     
  -print0：表示将null作为分隔符，而不是空格或换行符    
  xargs：是一个参数过滤器，-0表示用null分隔，这里相当于把find的结果通过null分隔得到结果，然后传给du命令，后面的就和使用du命令一样了      
